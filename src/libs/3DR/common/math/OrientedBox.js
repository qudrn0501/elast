const _0x5a8aba=_0x52b9;(function(_0x52e439,_0x40a570){const _0x5b9d09=_0x52b9,_0xfbd10a=_0x52e439();while(!![]){try{const _0x350c87=-parseInt(_0x5b9d09(0x177))/0x1+parseInt(_0x5b9d09(0x16f))/0x2+-parseInt(_0x5b9d09(0x16e))/0x3*(-parseInt(_0x5b9d09(0x164))/0x4)+-parseInt(_0x5b9d09(0x179))/0x5+parseInt(_0x5b9d09(0x15e))/0x6*(-parseInt(_0x5b9d09(0x156))/0x7)+parseInt(_0x5b9d09(0x162))/0x8+parseInt(_0x5b9d09(0x163))/0x9;if(_0x350c87===_0x40a570)break;else _0xfbd10a['push'](_0xfbd10a['shift']());}catch(_0x271b4e){_0xfbd10a['push'](_0xfbd10a['shift']());}}}(_0x5e48,0xa5dc6));function _0x5e48(){const _0x4bc33a=['intersectsBox','1253268raMzTS','subVectors','694805QSiwnN','map','distanceToBox','matrix','distanceTo','alignedSatBounds','1348060kkxgld','max','intersectsTriangle','prototype','satAxes','satBounds','isSeparated','isExtendedTriangle','12iIfoTl','points','setFromPoints','fill','7666800SXNpKO','668214IDgDht','52DcACOf','needsUpdate','distanceToPoint','min','isOrientedBox','applyMatrix4','copy','clamp','invMatrix','setFromPointsField','156873YHYceM','1488752LZDtDZ','closestPointToPoint','update','sqrt','set','distanceToSquared','getCenter'];_0x5e48=function(){return _0x4bc33a;};return _0x5e48();}import{Box3,Vector3,Matrix4,Line3}from'../../libs/build/three.module.js';function _0x52b9(_0x2520a3,_0x1a421f){const _0x5e487c=_0x5e48();return _0x52b9=function(_0x52b968,_0x344b21){_0x52b968=_0x52b968-0x154;let _0x2bf398=_0x5e487c[_0x52b968];return _0x2bf398;},_0x52b9(_0x2520a3,_0x1a421f);}import{SeparatingAxisBounds}from'./SeparatingAxisBounds.js';import{ExtendedTriangle}from'./ExtendedTriangle.js';import{closestPointsSegmentToSegment}from'./MathUtilities.js';export class OrientedBox extends Box3{constructor(..._0x85ce44){const _0xb2ed4f=_0x52b9;super(..._0x85ce44),this[_0xb2ed4f(0x168)]=!![],this[_0xb2ed4f(0x17c)]=new Matrix4(),this[_0xb2ed4f(0x16c)]=new Matrix4(),this[_0xb2ed4f(0x15f)]=new Array(0x8)[_0xb2ed4f(0x161)]()[_0xb2ed4f(0x17a)](()=>new Vector3()),this[_0xb2ed4f(0x15a)]=new Array(0x3)[_0xb2ed4f(0x161)]()[_0xb2ed4f(0x17a)](()=>new Vector3()),this[_0xb2ed4f(0x15b)]=new Array(0x3)[_0xb2ed4f(0x161)]()['map'](()=>new SeparatingAxisBounds()),this[_0xb2ed4f(0x155)]=new Array(0x3)[_0xb2ed4f(0x161)]()[_0xb2ed4f(0x17a)](()=>new SeparatingAxisBounds()),this[_0xb2ed4f(0x165)]=![];}[_0x5a8aba(0x173)](_0x27dc35,_0x13b86d,_0x24ecb9){const _0x53564e=_0x5a8aba;super[_0x53564e(0x173)](_0x27dc35,_0x13b86d),this[_0x53564e(0x17c)]['copy'](_0x24ecb9),this[_0x53564e(0x165)]=!![];}[_0x5a8aba(0x16a)](_0x1540eb){const _0x366b6e=_0x5a8aba;super[_0x366b6e(0x16a)](_0x1540eb),this['matrix'][_0x366b6e(0x16a)](_0x1540eb[_0x366b6e(0x17c)]),this[_0x366b6e(0x165)]=!![];}}OrientedBox[_0x5a8aba(0x159)]['update']=(function(){return function _0x256349(){const _0x80f921=_0x52b9,_0x5db2c6=this[_0x80f921(0x17c)],_0x5903b3=this['min'],_0x59049c=this[_0x80f921(0x157)],_0x196fef=this['points'];for(let _0x5b87f6=0x0;_0x5b87f6<=0x1;_0x5b87f6++){for(let _0x5b0a8b=0x0;_0x5b0a8b<=0x1;_0x5b0a8b++){for(let _0x537522=0x0;_0x537522<=0x1;_0x537522++){const _0x441ec3=(0x1<<0x0)*_0x5b87f6|(0x1<<0x1)*_0x5b0a8b|(0x1<<0x2)*_0x537522,_0x1345a0=_0x196fef[_0x441ec3];_0x1345a0['x']=_0x5b87f6?_0x59049c['x']:_0x5903b3['x'],_0x1345a0['y']=_0x5b0a8b?_0x59049c['y']:_0x5903b3['y'],_0x1345a0['z']=_0x537522?_0x59049c['z']:_0x5903b3['z'],_0x1345a0['applyMatrix4'](_0x5db2c6);}}}const _0x589d3c=this['satBounds'],_0x23a941=this[_0x80f921(0x15a)],_0x213087=_0x196fef[0x0];for(let _0x164556=0x0;_0x164556<0x3;_0x164556++){const _0x1dbaab=_0x23a941[_0x164556],_0x92b15d=_0x589d3c[_0x164556],_0x124b86=0x1<<_0x164556,_0x2b46f9=_0x196fef[_0x124b86];_0x1dbaab[_0x80f921(0x178)](_0x213087,_0x2b46f9),_0x92b15d[_0x80f921(0x160)](_0x1dbaab,_0x196fef);}const _0x3fc4f1=this[_0x80f921(0x155)];_0x3fc4f1[0x0][_0x80f921(0x16d)](_0x196fef,'x'),_0x3fc4f1[0x1]['setFromPointsField'](_0x196fef,'y'),_0x3fc4f1[0x2][_0x80f921(0x16d)](_0x196fef,'z'),this[_0x80f921(0x16c)][_0x80f921(0x16a)](this[_0x80f921(0x17c)])['invert'](),this[_0x80f921(0x165)]=![];};}()),OrientedBox[_0x5a8aba(0x159)][_0x5a8aba(0x176)]=(function(){const _0x255de5=new SeparatingAxisBounds();return function _0x4a89a8(_0xb8b396){const _0x4d03d1=_0x52b9;this['needsUpdate']&&this[_0x4d03d1(0x171)]();const _0x3b864f=_0xb8b396[_0x4d03d1(0x167)],_0x379e1b=_0xb8b396[_0x4d03d1(0x157)],_0x4b1fb1=this[_0x4d03d1(0x15b)],_0x5a85f6=this['satAxes'],_0x2c7db3=this[_0x4d03d1(0x155)];_0x255de5[_0x4d03d1(0x167)]=_0x3b864f['x'],_0x255de5['max']=_0x379e1b['x'];if(_0x2c7db3[0x0]['isSeparated'](_0x255de5))return![];_0x255de5['min']=_0x3b864f['y'],_0x255de5[_0x4d03d1(0x157)]=_0x379e1b['y'];if(_0x2c7db3[0x1]['isSeparated'](_0x255de5))return![];_0x255de5['min']=_0x3b864f['z'],_0x255de5[_0x4d03d1(0x157)]=_0x379e1b['z'];if(_0x2c7db3[0x2]['isSeparated'](_0x255de5))return![];for(let _0x4bc829=0x0;_0x4bc829<0x3;_0x4bc829++){const _0x42af8b=_0x5a85f6[_0x4bc829],_0x35b069=_0x4b1fb1[_0x4bc829];_0x255de5['setFromBox'](_0x42af8b,_0xb8b396);if(_0x35b069[_0x4d03d1(0x15c)](_0x255de5))return![];}return!![];};}()),OrientedBox[_0x5a8aba(0x159)][_0x5a8aba(0x158)]=(function(){const _0x40aa25=new ExtendedTriangle(),_0x2170ab=new Array(0x3),_0x3fbf49=new SeparatingAxisBounds(),_0x43ed69=new SeparatingAxisBounds(),_0x592584=new Vector3();return function _0x463150(_0x4571c7){const _0x38e8a1=_0x52b9;this[_0x38e8a1(0x165)]&&this[_0x38e8a1(0x171)]();if(!_0x4571c7[_0x38e8a1(0x15d)])_0x40aa25[_0x38e8a1(0x16a)](_0x4571c7),_0x40aa25['update'](),_0x4571c7=_0x40aa25;else _0x4571c7[_0x38e8a1(0x165)]&&_0x4571c7[_0x38e8a1(0x171)]();const _0xa3bc8=this[_0x38e8a1(0x15b)],_0x2b2380=this['satAxes'];_0x2170ab[0x0]=_0x4571c7['a'],_0x2170ab[0x1]=_0x4571c7['b'],_0x2170ab[0x2]=_0x4571c7['c'];for(let _0x454da8=0x0;_0x454da8<0x3;_0x454da8++){const _0x2d20e0=_0xa3bc8[_0x454da8],_0x11883f=_0x2b2380[_0x454da8];_0x3fbf49['setFromPoints'](_0x11883f,_0x2170ab);if(_0x2d20e0[_0x38e8a1(0x15c)](_0x3fbf49))return![];}const _0x2a4ece=_0x4571c7[_0x38e8a1(0x15b)],_0x2b0491=_0x4571c7[_0x38e8a1(0x15a)],_0x437b81=this[_0x38e8a1(0x15f)];for(let _0x453468=0x0;_0x453468<0x3;_0x453468++){const _0x296ac7=_0x2a4ece[_0x453468],_0x19b678=_0x2b0491[_0x453468];_0x3fbf49['setFromPoints'](_0x19b678,_0x437b81);if(_0x296ac7[_0x38e8a1(0x15c)](_0x3fbf49))return![];}for(let _0x2ef5c2=0x0;_0x2ef5c2<0x3;_0x2ef5c2++){const _0x522a7e=_0x2b2380[_0x2ef5c2];for(let _0x267085=0x0;_0x267085<0x4;_0x267085++){const _0x6a3b5b=_0x2b0491[_0x267085];_0x592584['crossVectors'](_0x522a7e,_0x6a3b5b),_0x3fbf49['setFromPoints'](_0x592584,_0x2170ab),_0x43ed69['setFromPoints'](_0x592584,_0x437b81);if(_0x3fbf49[_0x38e8a1(0x15c)](_0x43ed69))return![];}}return!![];};}()),OrientedBox['prototype'][_0x5a8aba(0x170)]=(function(){return function _0x3bf38e(_0x3153fa,_0x1196b9){const _0x5ce842=_0x52b9;return this[_0x5ce842(0x165)]&&this[_0x5ce842(0x171)](),_0x1196b9[_0x5ce842(0x16a)](_0x3153fa)[_0x5ce842(0x169)](this[_0x5ce842(0x16c)])[_0x5ce842(0x16b)](this[_0x5ce842(0x167)],this[_0x5ce842(0x157)])[_0x5ce842(0x169)](this[_0x5ce842(0x17c)]),_0x1196b9;};}()),OrientedBox[_0x5a8aba(0x159)][_0x5a8aba(0x166)]=(function(){const _0x1aaded=new Vector3();return function _0x452db2(_0x1e6ae9){const _0x5ed398=_0x52b9;return this[_0x5ed398(0x170)](_0x1e6ae9,_0x1aaded),_0x1e6ae9[_0x5ed398(0x154)](_0x1aaded);};}()),OrientedBox[_0x5a8aba(0x159)][_0x5a8aba(0x17b)]=(function(){const _0x540a00=_0x5a8aba,_0x51abaf=['x','y','z'],_0x561f5d=new Array(0xc)[_0x540a00(0x161)]()['map'](()=>new Line3()),_0x5f0fa0=new Array(0xc)[_0x540a00(0x161)]()[_0x540a00(0x17a)](()=>new Line3()),_0x5a41a2=new Vector3(),_0x50cda6=new Vector3();return function _0x82baf3(_0x33f70e,_0x5adea4=0x0,_0x30b45b=null,_0x1d2820=null){const _0x522576=_0x540a00;this[_0x522576(0x165)]&&this[_0x522576(0x171)]();if(this['intersectsBox'](_0x33f70e)){if(_0x30b45b||_0x1d2820){_0x33f70e[_0x522576(0x175)](_0x50cda6),this[_0x522576(0x170)](_0x50cda6,_0x5a41a2),_0x33f70e[_0x522576(0x170)](_0x5a41a2,_0x50cda6);if(_0x30b45b)_0x30b45b[_0x522576(0x16a)](_0x5a41a2);if(_0x1d2820)_0x1d2820['copy'](_0x50cda6);}return 0x0;}const _0x2cd087=_0x5adea4*_0x5adea4,_0x4705da=_0x33f70e[_0x522576(0x167)],_0x337b3d=_0x33f70e[_0x522576(0x157)],_0x55b320=this[_0x522576(0x15f)];let _0x1444f7=Infinity;for(let _0x4926b0=0x0;_0x4926b0<0x8;_0x4926b0++){const _0x54e995=_0x55b320[_0x4926b0];_0x50cda6[_0x522576(0x16a)](_0x54e995)[_0x522576(0x16b)](_0x4705da,_0x337b3d);const _0x1636b9=_0x54e995[_0x522576(0x174)](_0x50cda6);if(_0x1636b9<_0x1444f7){_0x1444f7=_0x1636b9;if(_0x30b45b)_0x30b45b[_0x522576(0x16a)](_0x54e995);if(_0x1d2820)_0x1d2820[_0x522576(0x16a)](_0x50cda6);if(_0x1636b9<_0x2cd087)return Math['sqrt'](_0x1636b9);}}let _0x5277b8=0x0;for(let _0x28f868=0x0;_0x28f868<0x3;_0x28f868++){for(let _0x13481b=0x0;_0x13481b<=0x1;_0x13481b++){for(let _0x574712=0x0;_0x574712<=0x1;_0x574712++){const _0x551c45=(_0x28f868+0x1)%0x3,_0x5e9fe7=(_0x28f868+0x2)%0x3,_0x4f4bdc=_0x13481b<<_0x551c45|_0x574712<<_0x5e9fe7,_0x5ba454=0x1<<_0x28f868|_0x13481b<<_0x551c45|_0x574712<<_0x5e9fe7,_0xd2f323=_0x55b320[_0x4f4bdc],_0xbc62d9=_0x55b320[_0x5ba454],_0x5d24ba=_0x561f5d[_0x5277b8];_0x5d24ba[_0x522576(0x173)](_0xd2f323,_0xbc62d9);const _0x5ced2d=_0x51abaf[_0x28f868],_0x19d85d=_0x51abaf[_0x551c45],_0x5378a8=_0x51abaf[_0x5e9fe7],_0x5b6dbb=_0x5f0fa0[_0x5277b8],_0xc18be9=_0x5b6dbb['start'],_0x5e10fe=_0x5b6dbb['end'];_0xc18be9[_0x5ced2d]=_0x4705da[_0x5ced2d],_0xc18be9[_0x19d85d]=_0x13481b?_0x4705da[_0x19d85d]:_0x337b3d[_0x19d85d],_0xc18be9[_0x5378a8]=_0x574712?_0x4705da[_0x5378a8]:_0x337b3d[_0x19d85d],_0x5e10fe[_0x5ced2d]=_0x337b3d[_0x5ced2d],_0x5e10fe[_0x19d85d]=_0x13481b?_0x4705da[_0x19d85d]:_0x337b3d[_0x19d85d],_0x5e10fe[_0x5378a8]=_0x574712?_0x4705da[_0x5378a8]:_0x337b3d[_0x19d85d],_0x5277b8++;}}}for(let _0x24bea5=0x0;_0x24bea5<=0x1;_0x24bea5++){for(let _0x39e0cd=0x0;_0x39e0cd<=0x1;_0x39e0cd++){for(let _0x2b6904=0x0;_0x2b6904<=0x1;_0x2b6904++){_0x50cda6['x']=_0x24bea5?_0x337b3d['x']:_0x4705da['x'],_0x50cda6['y']=_0x39e0cd?_0x337b3d['y']:_0x4705da['y'],_0x50cda6['z']=_0x2b6904?_0x337b3d['z']:_0x4705da['z'],this[_0x522576(0x170)](_0x50cda6,_0x5a41a2);const _0xa3acf3=_0x50cda6[_0x522576(0x174)](_0x5a41a2);if(_0xa3acf3<_0x1444f7){_0x1444f7=_0xa3acf3;if(_0x30b45b)_0x30b45b[_0x522576(0x16a)](_0x5a41a2);if(_0x1d2820)_0x1d2820[_0x522576(0x16a)](_0x50cda6);if(_0xa3acf3<_0x2cd087)return Math[_0x522576(0x172)](_0xa3acf3);}}}}for(let _0xc0a998=0x0;_0xc0a998<0xc;_0xc0a998++){const _0x585ed3=_0x561f5d[_0xc0a998];for(let _0x60d314=0x0;_0x60d314<0xc;_0x60d314++){const _0x285748=_0x5f0fa0[_0x60d314];closestPointsSegmentToSegment(_0x585ed3,_0x285748,_0x5a41a2,_0x50cda6);const _0x3ab7c1=_0x5a41a2['distanceToSquared'](_0x50cda6);if(_0x3ab7c1<_0x1444f7){_0x1444f7=_0x3ab7c1;if(_0x30b45b)_0x30b45b['copy'](_0x5a41a2);if(_0x1d2820)_0x1d2820[_0x522576(0x16a)](_0x50cda6);if(_0x3ab7c1<_0x2cd087)return Math[_0x522576(0x172)](_0x3ab7c1);}}}return Math['sqrt'](_0x1444f7);};}());