const _0x177838=_0x3aa9;function _0x1fdd(){const _0x3484a0=['intersectsSphere','isExtendedTriangle','1726cYFLhO','containsPoint','intersectLine','2483591BCFpSZ','satAxes','getCenter','5512784DvihqP','start','map','subVectors','end','7aAHHug','distanceToTriangle','plane','102wRKzXy','setFromPoints','abs','8163gqrnvY','closestPointToPoint','intersectsTriangle','setFromNormalAndCoplanarPoint','crossVectors','fill','14890NpHjxW','satBounds','2064424XkjTlv','points','copy','83395rDsBoL','distanceTo','dot','getNormal','update','distanceToPoint','delta','prototype','needsUpdate','normal','sqrt','614435KaiTrI','132YqPbnh','set','3951LjxveP','ExtendedTriangle.intersectsTriangle:\x20Triangles\x20are\x20coplanar\x20which\x20does\x20not\x20support\x20an\x20output\x20edge.\x20Setting\x20edge\x20to\x200,\x200,\x200.','distanceToSquared','isSeparated'];_0x1fdd=function(){return _0x3484a0;};return _0x1fdd();}(function(_0x2d8803,_0x105b5e){const _0x43f331=_0x3aa9,_0x3fa8b6=_0x2d8803();while(!![]){try{const _0x151100=-parseInt(_0x43f331(0x157))/0x1+parseInt(_0x43f331(0x160))/0x2*(-parseInt(_0x43f331(0x15a))/0x3)+parseInt(_0x43f331(0x166))/0x4+parseInt(_0x43f331(0x17c))/0x5*(-parseInt(_0x43f331(0x16e))/0x6)+parseInt(_0x43f331(0x16b))/0x7*(parseInt(_0x43f331(0x179))/0x8)+-parseInt(_0x43f331(0x171))/0x9*(parseInt(_0x43f331(0x177))/0xa)+parseInt(_0x43f331(0x163))/0xb*(parseInt(_0x43f331(0x158))/0xc);if(_0x151100===_0x105b5e)break;else _0x3fa8b6['push'](_0x3fa8b6['shift']());}catch(_0x5e5bc1){_0x3fa8b6['push'](_0x3fa8b6['shift']());}}}(_0x1fdd,0xb3630));import{Triangle,Vector3,Line3,Sphere,Plane}from'../../libs/build/three.module.js';import{SeparatingAxisBounds}from'./SeparatingAxisBounds.js';import{closestPointsSegmentToSegment,sphereIntersectTriangle}from'./MathUtilities.js';const DIST_EPSILON=1e-15;function isNearZero(_0x324227){const _0x3e27ca=_0x3aa9;return Math[_0x3e27ca(0x170)](_0x324227)<DIST_EPSILON;}function _0x3aa9(_0x24b537,_0x2f8a78){const _0x1fdd50=_0x1fdd();return _0x3aa9=function(_0x3aa9df,_0xbd4dc8){_0x3aa9df=_0x3aa9df-0x14e;let _0x330bda=_0x1fdd50[_0x3aa9df];return _0x330bda;},_0x3aa9(_0x24b537,_0x2f8a78);}export class ExtendedTriangle extends Triangle{constructor(..._0xfec3d2){const _0x8b05b8=_0x3aa9;super(..._0xfec3d2),this[_0x8b05b8(0x15f)]=!![],this[_0x8b05b8(0x164)]=new Array(0x4)[_0x8b05b8(0x176)]()['map'](()=>new Vector3()),this[_0x8b05b8(0x178)]=new Array(0x4)[_0x8b05b8(0x176)]()[_0x8b05b8(0x168)](()=>new SeparatingAxisBounds()),this[_0x8b05b8(0x17a)]=[this['a'],this['b'],this['c']],this['sphere']=new Sphere(),this[_0x8b05b8(0x16d)]=new Plane(),this[_0x8b05b8(0x154)]=!![];}[_0x177838(0x15e)](_0x57c012){return sphereIntersectTriangle(_0x57c012,this);}[_0x177838(0x150)](){const _0xc4291a=_0x177838,_0x59de14=this['a'],_0x47ee9c=this['b'],_0x2531ab=this['c'],_0x286395=this[_0xc4291a(0x17a)],_0x57cdba=this[_0xc4291a(0x164)],_0x9096c7=this[_0xc4291a(0x178)],_0x542b06=_0x57cdba[0x0],_0x47f57c=_0x9096c7[0x0];this[_0xc4291a(0x14f)](_0x542b06),_0x47f57c[_0xc4291a(0x16f)](_0x542b06,_0x286395);const _0x273eb4=_0x57cdba[0x1],_0x3db4bf=_0x9096c7[0x1];_0x273eb4[_0xc4291a(0x169)](_0x59de14,_0x47ee9c),_0x3db4bf[_0xc4291a(0x16f)](_0x273eb4,_0x286395);const _0x2843df=_0x57cdba[0x2],_0x3249d2=_0x9096c7[0x2];_0x2843df[_0xc4291a(0x169)](_0x47ee9c,_0x2531ab),_0x3249d2['setFromPoints'](_0x2843df,_0x286395);const _0x4188ae=_0x57cdba[0x3],_0x17e767=_0x9096c7[0x3];_0x4188ae[_0xc4291a(0x169)](_0x2531ab,_0x59de14),_0x17e767[_0xc4291a(0x16f)](_0x4188ae,_0x286395),this['sphere'][_0xc4291a(0x16f)](this['points']),this[_0xc4291a(0x16d)][_0xc4291a(0x174)](_0x542b06,_0x59de14),this['needsUpdate']=![];}}ExtendedTriangle[_0x177838(0x153)]['closestPointToSegment']=(function(){const _0x7b7a57=new Vector3(),_0x190f65=new Vector3(),_0x11c438=new Line3();return function _0xfcd0cf(_0x4261a8,_0x3dff68=null,_0x21ca6d=null){const _0x1f938b=_0x3aa9,{start:_0x6ea836,end:_0x4eb16e}=_0x4261a8,_0x4279a3=this[_0x1f938b(0x17a)];let _0x4771d6,_0xa84e60=Infinity;for(let _0x55d3b0=0x0;_0x55d3b0<0x3;_0x55d3b0++){const _0x49da94=(_0x55d3b0+0x1)%0x3;_0x11c438['start'][_0x1f938b(0x17b)](_0x4279a3[_0x55d3b0]),_0x11c438[_0x1f938b(0x16a)][_0x1f938b(0x17b)](_0x4279a3[_0x49da94]),closestPointsSegmentToSegment(_0x11c438,_0x4261a8,_0x7b7a57,_0x190f65),_0x4771d6=_0x7b7a57[_0x1f938b(0x15c)](_0x190f65);if(_0x4771d6<_0xa84e60){_0xa84e60=_0x4771d6;if(_0x3dff68)_0x3dff68[_0x1f938b(0x17b)](_0x7b7a57);if(_0x21ca6d)_0x21ca6d['copy'](_0x190f65);}}this[_0x1f938b(0x172)](_0x6ea836,_0x7b7a57),_0x4771d6=_0x6ea836[_0x1f938b(0x15c)](_0x7b7a57);if(_0x4771d6<_0xa84e60){_0xa84e60=_0x4771d6;if(_0x3dff68)_0x3dff68['copy'](_0x7b7a57);if(_0x21ca6d)_0x21ca6d[_0x1f938b(0x17b)](_0x6ea836);}this[_0x1f938b(0x172)](_0x4eb16e,_0x7b7a57),_0x4771d6=_0x4eb16e[_0x1f938b(0x15c)](_0x7b7a57);if(_0x4771d6<_0xa84e60){_0xa84e60=_0x4771d6;if(_0x3dff68)_0x3dff68[_0x1f938b(0x17b)](_0x7b7a57);if(_0x21ca6d)_0x21ca6d[_0x1f938b(0x17b)](_0x4eb16e);}return Math[_0x1f938b(0x156)](_0xa84e60);};}()),ExtendedTriangle[_0x177838(0x153)][_0x177838(0x173)]=(function(){const _0x4b7660=new ExtendedTriangle(),_0x116a16=new Array(0x3),_0x5befde=new Array(0x3),_0x21643b=new SeparatingAxisBounds(),_0x28ede1=new SeparatingAxisBounds(),_0xd878a8=new Vector3(),_0x5acfde=new Vector3(),_0x4f0605=new Vector3(),_0x4d845b=new Vector3(),_0x50e78a=new Line3(),_0x559813=new Line3(),_0x189bcc=new Line3();return function _0x2b69b8(_0x5942d1,_0x29d75d=null){const _0x3cddf9=_0x3aa9;this[_0x3cddf9(0x154)]&&this[_0x3cddf9(0x150)]();if(!_0x5942d1['isExtendedTriangle'])_0x4b7660[_0x3cddf9(0x17b)](_0x5942d1),_0x4b7660[_0x3cddf9(0x150)](),_0x5942d1=_0x4b7660;else _0x5942d1[_0x3cddf9(0x154)]&&_0x5942d1['update']();const _0x1f5b05=this['plane'],_0x3ee45c=_0x5942d1[_0x3cddf9(0x16d)];if(Math['abs'](_0x1f5b05['normal']['dot'](_0x3ee45c[_0x3cddf9(0x155)]))>0x1-1e-10){const _0x4c6b1c=this['satBounds'],_0x8e711a=this['satAxes'];_0x5befde[0x0]=_0x5942d1['a'],_0x5befde[0x1]=_0x5942d1['b'],_0x5befde[0x2]=_0x5942d1['c'];for(let _0x51802d=0x0;_0x51802d<0x4;_0x51802d++){const _0x2ecd2a=_0x4c6b1c[_0x51802d],_0x250052=_0x8e711a[_0x51802d];_0x21643b['setFromPoints'](_0x250052,_0x5befde);if(_0x2ecd2a['isSeparated'](_0x21643b))return![];}const _0x5db367=_0x5942d1[_0x3cddf9(0x178)],_0x41eb55=_0x5942d1[_0x3cddf9(0x164)];_0x116a16[0x0]=this['a'],_0x116a16[0x1]=this['b'],_0x116a16[0x2]=this['c'];for(let _0x5a61c5=0x0;_0x5a61c5<0x4;_0x5a61c5++){const _0x3cb22c=_0x5db367[_0x5a61c5],_0x2949b9=_0x41eb55[_0x5a61c5];_0x21643b['setFromPoints'](_0x2949b9,_0x116a16);if(_0x3cb22c[_0x3cddf9(0x15d)](_0x21643b))return![];}for(let _0x23b272=0x0;_0x23b272<0x4;_0x23b272++){const _0x2c4dac=_0x8e711a[_0x23b272];for(let _0x578765=0x0;_0x578765<0x4;_0x578765++){const _0x158bb1=_0x41eb55[_0x578765];_0xd878a8[_0x3cddf9(0x175)](_0x2c4dac,_0x158bb1),_0x21643b['setFromPoints'](_0xd878a8,_0x116a16),_0x28ede1[_0x3cddf9(0x16f)](_0xd878a8,_0x5befde);if(_0x21643b[_0x3cddf9(0x15d)](_0x28ede1))return![];}}return _0x29d75d&&(console['warn'](_0x3cddf9(0x15b)),_0x29d75d[_0x3cddf9(0x167)][_0x3cddf9(0x159)](0x0,0x0,0x0),_0x29d75d[_0x3cddf9(0x16a)][_0x3cddf9(0x159)](0x0,0x0,0x0)),!![];}else{const _0x14f1d1=this['points'];let _0x4f0660=![],_0x5b2737=0x0;for(let _0x47008c=0x0;_0x47008c<0x3;_0x47008c++){const _0x4ebcd7=_0x14f1d1[_0x47008c],_0x98845=_0x14f1d1[(_0x47008c+0x1)%0x3];_0x50e78a[_0x3cddf9(0x167)][_0x3cddf9(0x17b)](_0x4ebcd7),_0x50e78a['end'][_0x3cddf9(0x17b)](_0x98845),_0x50e78a[_0x3cddf9(0x152)](_0x5acfde);const _0x5126c6=_0x4f0660?_0x559813[_0x3cddf9(0x167)]:_0x559813['end'],_0x49ece2=isNearZero(_0x3ee45c[_0x3cddf9(0x151)](_0x4ebcd7));if(isNearZero(_0x3ee45c[_0x3cddf9(0x155)][_0x3cddf9(0x14e)](_0x5acfde))&&_0x49ece2){_0x559813['copy'](_0x50e78a),_0x5b2737=0x2;break;}const _0x13564b=_0x3ee45c[_0x3cddf9(0x162)](_0x50e78a,_0x5126c6)||_0x49ece2;if(_0x13564b&&!isNearZero(_0x5126c6[_0x3cddf9(0x17d)](_0x98845))){_0x5b2737++;if(_0x4f0660)break;_0x4f0660=!![];}}if(_0x5b2737===0x1&&this[_0x3cddf9(0x161)](_0x559813['start']))return _0x29d75d&&(_0x29d75d[_0x3cddf9(0x167)]['copy'](_0x559813[_0x3cddf9(0x167)]),_0x29d75d[_0x3cddf9(0x16a)][_0x3cddf9(0x17b)](_0x559813[_0x3cddf9(0x167)])),!![];else{if(_0x5b2737!==0x2)return![];}const _0x4860be=_0x5942d1[_0x3cddf9(0x17a)];let _0x3c8ed4=![],_0x4ea971=0x0;for(let _0x5c4edb=0x0;_0x5c4edb<0x3;_0x5c4edb++){const _0x2c2f0a=_0x4860be[_0x5c4edb],_0x3748b3=_0x4860be[(_0x5c4edb+0x1)%0x3];_0x50e78a[_0x3cddf9(0x167)]['copy'](_0x2c2f0a),_0x50e78a[_0x3cddf9(0x16a)][_0x3cddf9(0x17b)](_0x3748b3),_0x50e78a[_0x3cddf9(0x152)](_0x4f0605);const _0x2acd7d=_0x3c8ed4?_0x189bcc[_0x3cddf9(0x167)]:_0x189bcc['end'],_0x5529a7=isNearZero(_0x1f5b05[_0x3cddf9(0x151)](_0x2c2f0a));if(isNearZero(_0x1f5b05[_0x3cddf9(0x155)][_0x3cddf9(0x14e)](_0x4f0605))&&_0x5529a7){_0x189bcc[_0x3cddf9(0x17b)](_0x50e78a),_0x4ea971=0x2;break;}const _0x8b511a=_0x1f5b05[_0x3cddf9(0x162)](_0x50e78a,_0x2acd7d)||_0x5529a7;if(_0x8b511a&&!isNearZero(_0x2acd7d[_0x3cddf9(0x17d)](_0x3748b3))){_0x4ea971++;if(_0x3c8ed4)break;_0x3c8ed4=!![];}}if(_0x4ea971===0x1&&this[_0x3cddf9(0x161)](_0x189bcc[_0x3cddf9(0x167)]))return _0x29d75d&&(_0x29d75d[_0x3cddf9(0x167)][_0x3cddf9(0x17b)](_0x189bcc[_0x3cddf9(0x167)]),_0x29d75d['end'][_0x3cddf9(0x17b)](_0x189bcc[_0x3cddf9(0x167)])),!![];else{if(_0x4ea971!==0x2)return![];}_0x559813[_0x3cddf9(0x152)](_0x5acfde),_0x189bcc[_0x3cddf9(0x152)](_0x4f0605);if(_0x5acfde[_0x3cddf9(0x14e)](_0x4f0605)<0x0){let _0x357b4f=_0x189bcc[_0x3cddf9(0x167)];_0x189bcc[_0x3cddf9(0x167)]=_0x189bcc[_0x3cddf9(0x16a)],_0x189bcc[_0x3cddf9(0x16a)]=_0x357b4f;}const _0x3080cf=_0x559813['start'][_0x3cddf9(0x14e)](_0x5acfde),_0x27968d=_0x559813[_0x3cddf9(0x16a)][_0x3cddf9(0x14e)](_0x5acfde),_0x652ec2=_0x189bcc[_0x3cddf9(0x167)][_0x3cddf9(0x14e)](_0x5acfde),_0xe50eff=_0x189bcc['end'][_0x3cddf9(0x14e)](_0x5acfde),_0x5d362a=_0x27968d<_0x652ec2,_0xa93b61=_0x3080cf<_0xe50eff;if(_0x3080cf!==_0xe50eff&&_0x652ec2!==_0x27968d&&_0x5d362a===_0xa93b61)return![];return _0x29d75d&&(_0x4d845b[_0x3cddf9(0x169)](_0x559813[_0x3cddf9(0x167)],_0x189bcc[_0x3cddf9(0x167)]),_0x4d845b[_0x3cddf9(0x14e)](_0x5acfde)>0x0?_0x29d75d['start'][_0x3cddf9(0x17b)](_0x559813[_0x3cddf9(0x167)]):_0x29d75d[_0x3cddf9(0x167)]['copy'](_0x189bcc['start']),_0x4d845b[_0x3cddf9(0x169)](_0x559813[_0x3cddf9(0x16a)],_0x189bcc[_0x3cddf9(0x16a)]),_0x4d845b['dot'](_0x5acfde)<0x0?_0x29d75d[_0x3cddf9(0x16a)]['copy'](_0x559813['end']):_0x29d75d[_0x3cddf9(0x16a)][_0x3cddf9(0x17b)](_0x189bcc[_0x3cddf9(0x16a)])),!![];}};}()),ExtendedTriangle[_0x177838(0x153)][_0x177838(0x151)]=(function(){const _0x10ef41=new Vector3();return function _0x391227(_0x4ce6cc){const _0x368be2=_0x3aa9;return this[_0x368be2(0x172)](_0x4ce6cc,_0x10ef41),_0x4ce6cc[_0x368be2(0x17d)](_0x10ef41);};}()),ExtendedTriangle[_0x177838(0x153)][_0x177838(0x16c)]=(function(){const _0x5ba1be=new Vector3(),_0x1cf17a=new Vector3(),_0x57b941=['a','b','c'],_0x466337=new Line3(),_0x5b3f6c=new Line3();return function _0x21dfb3(_0x13e2a0,_0x5cd2cd=null,_0x382f80=null){const _0x1db00c=_0x3aa9,_0x200abe=_0x5cd2cd||_0x382f80?_0x466337:null;if(this[_0x1db00c(0x173)](_0x13e2a0,_0x200abe)){if(_0x5cd2cd||_0x382f80){if(_0x5cd2cd)_0x200abe[_0x1db00c(0x165)](_0x5cd2cd);if(_0x382f80)_0x200abe[_0x1db00c(0x165)](_0x382f80);}return 0x0;}let _0x53a47d=Infinity;for(let _0x3d94d8=0x0;_0x3d94d8<0x3;_0x3d94d8++){let _0x334d91;const _0x1c5a55=_0x57b941[_0x3d94d8],_0x29f647=_0x13e2a0[_0x1c5a55];this[_0x1db00c(0x172)](_0x29f647,_0x5ba1be),_0x334d91=_0x29f647['distanceToSquared'](_0x5ba1be);if(_0x334d91<_0x53a47d){_0x53a47d=_0x334d91;if(_0x5cd2cd)_0x5cd2cd[_0x1db00c(0x17b)](_0x5ba1be);if(_0x382f80)_0x382f80[_0x1db00c(0x17b)](_0x29f647);}const _0x314071=this[_0x1c5a55];_0x13e2a0[_0x1db00c(0x172)](_0x314071,_0x5ba1be),_0x334d91=_0x314071['distanceToSquared'](_0x5ba1be);if(_0x334d91<_0x53a47d){_0x53a47d=_0x334d91;if(_0x5cd2cd)_0x5cd2cd[_0x1db00c(0x17b)](_0x314071);if(_0x382f80)_0x382f80[_0x1db00c(0x17b)](_0x5ba1be);}}for(let _0x88709c=0x0;_0x88709c<0x3;_0x88709c++){const _0x40774e=_0x57b941[_0x88709c],_0x3b4b51=_0x57b941[(_0x88709c+0x1)%0x3];_0x466337[_0x1db00c(0x159)](this[_0x40774e],this[_0x3b4b51]);for(let _0x571f1e=0x0;_0x571f1e<0x3;_0x571f1e++){const _0x30588f=_0x57b941[_0x571f1e],_0x2861fc=_0x57b941[(_0x571f1e+0x1)%0x3];_0x5b3f6c[_0x1db00c(0x159)](_0x13e2a0[_0x30588f],_0x13e2a0[_0x2861fc]),closestPointsSegmentToSegment(_0x466337,_0x5b3f6c,_0x5ba1be,_0x1cf17a);const _0x29a0a9=_0x5ba1be['distanceToSquared'](_0x1cf17a);if(_0x29a0a9<_0x53a47d){_0x53a47d=_0x29a0a9;if(_0x5cd2cd)_0x5cd2cd['copy'](_0x5ba1be);if(_0x382f80)_0x382f80[_0x1db00c(0x17b)](_0x1cf17a);}}}return Math[_0x1db00c(0x156)](_0x53a47d);};}());