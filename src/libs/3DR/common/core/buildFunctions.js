const _0xe4d40=_0x4c4a;(function(_0x307718,_0x48340f){const _0x367de1=_0x4c4a,_0x4c82e1=_0x307718();while(!![]){try{const _0x375bf0=-parseInt(_0x367de1(0x9c))/0x1+parseInt(_0x367de1(0xac))/0x2*(-parseInt(_0x367de1(0xbe))/0x3)+parseInt(_0x367de1(0x9e))/0x4*(-parseInt(_0x367de1(0xa5))/0x5)+parseInt(_0x367de1(0xad))/0x6*(-parseInt(_0x367de1(0xab))/0x7)+parseInt(_0x367de1(0x9f))/0x8+-parseInt(_0x367de1(0xb4))/0x9*(-parseInt(_0x367de1(0xc4))/0xa)+parseInt(_0x367de1(0xc7))/0xb;if(_0x375bf0===_0x48340f)break;else _0x4c82e1['push'](_0x4c82e1['shift']());}catch(_0x388f11){_0x4c82e1['push'](_0x4c82e1['shift']());}}}(_0x4e80,0x5513d));import{BufferAttribute}from'../../libs/build/three.module.js';import{MeshBVHNode}from'./MeshBVHNode.js';import{getLongestEdgeIndex,computeSurfaceArea,copyBounds,unionBounds,expandByTriangleBounds}from'../utils/ArrayBoxUtilities.js';function _0x4e80(){const _0x59769e=['maxLeafTris','verbose','right','start','useSharedArrayBuffer','75324IursDb','count','leftCacheBounds','bounds','pos','stride','4990ApwBiB','offset','add','12620960dAaKJx','map','attributes','warn','maxDepth','boundingData','splitAxis','sort','rightCacheBounds','94194asdprN','onProgress','20XOAiGU','1312208rsNBbe','candidate','MeshBVH:\x20Invalid\x20build\x20strategy\x20value\x20','groups','position','MeshBVH:\x20Cannot\x20store\x20child\x20pointer\x20greater\x20than\x2032\x20bits.','589465shhADR','fill','index','setIndex','values','isInterleavedBufferAttribute','23051EoTjPX','46bywoFg','474wRRXDO','array','from','strategy','push','\x20used.','abs','10071CosoCD','length','left','MeshBVH:\x20Max\x20depth\x20of\x20','axis'];_0x4e80=function(){return _0x59769e;};return _0x4e80();}import{CENTER,AVERAGE,SAH,TRIANGLE_INTERSECT_COST,TRAVERSAL_COST,BYTES_PER_NODE,FLOAT32_EPSILON,IS_LEAFNODE_FLAG}from'./Constants.js';function ensureIndex(_0x4ddfe8,_0x321aba){const _0x43dea8=_0x4c4a;if(!_0x4ddfe8[_0x43dea8(0xa7)]){const _0x154105=_0x4ddfe8[_0x43dea8(0xc9)][_0x43dea8(0xa3)]['count'],_0x425335=_0x321aba[_0x43dea8(0xbd)]?SharedArrayBuffer:ArrayBuffer;let _0x348635;_0x154105>0xffff?_0x348635=new Uint32Array(new _0x425335(0x4*_0x154105)):_0x348635=new Uint16Array(new _0x425335(0x2*_0x154105));_0x4ddfe8[_0x43dea8(0xa8)](new BufferAttribute(_0x348635,0x1));for(let _0x1e932c=0x0;_0x1e932c<_0x154105;_0x1e932c++){_0x348635[_0x1e932c]=_0x1e932c;}}}function getRootIndexRanges(_0x3279ff){const _0x2ad08d=_0x4c4a;if(!_0x3279ff[_0x2ad08d(0xa2)]||!_0x3279ff[_0x2ad08d(0xa2)]['length'])return[{'offset':0x0,'count':_0x3279ff[_0x2ad08d(0xa7)][_0x2ad08d(0xbf)]/0x3}];const _0xa3e82c=[],_0x2f5247=new Set();for(const _0x26566a of _0x3279ff[_0x2ad08d(0xa2)]){_0x2f5247['add'](_0x26566a['start']),_0x2f5247[_0x2ad08d(0xc6)](_0x26566a[_0x2ad08d(0xbc)]+_0x26566a[_0x2ad08d(0xbf)]);}const _0x5ecb36=Array[_0x2ad08d(0xaf)](_0x2f5247[_0x2ad08d(0xa9)]())[_0x2ad08d(0xce)]((_0x31e8bf,_0x315ec7)=>_0x31e8bf-_0x315ec7);for(let _0x1a4390=0x0;_0x1a4390<_0x5ecb36['length']-0x1;_0x1a4390++){const _0x33ff22=_0x5ecb36[_0x1a4390],_0x3c07c8=_0x5ecb36[_0x1a4390+0x1];_0xa3e82c[_0x2ad08d(0xb1)]({'offset':_0x33ff22/0x3,'count':(_0x3c07c8-_0x33ff22)/0x3});}return _0xa3e82c;}function getBounds(_0x5ad6b4,_0x44853b,_0x13466d,_0x659f66,_0x8c58e3=null){let _0x4d9e6c=Infinity,_0x170f47=Infinity,_0x5aea19=Infinity,_0x2ff5e8=-Infinity,_0x5d9658=-Infinity,_0x4b73ec=-Infinity,_0x310f10=Infinity,_0x588e53=Infinity,_0x4516a3=Infinity,_0x3ecc24=-Infinity,_0x2b1505=-Infinity,_0x300b72=-Infinity;const _0x35ffde=_0x8c58e3!==null;for(let _0x55bc29=_0x44853b*0x6,_0x206dad=(_0x44853b+_0x13466d)*0x6;_0x55bc29<_0x206dad;_0x55bc29+=0x6){const _0x58149d=_0x5ad6b4[_0x55bc29+0x0],_0x453300=_0x5ad6b4[_0x55bc29+0x1],_0x4b1432=_0x58149d-_0x453300,_0x473d29=_0x58149d+_0x453300;if(_0x4b1432<_0x4d9e6c)_0x4d9e6c=_0x4b1432;if(_0x473d29>_0x2ff5e8)_0x2ff5e8=_0x473d29;if(_0x35ffde&&_0x58149d<_0x310f10)_0x310f10=_0x58149d;if(_0x35ffde&&_0x58149d>_0x3ecc24)_0x3ecc24=_0x58149d;const _0x5b5c12=_0x5ad6b4[_0x55bc29+0x2],_0x36da02=_0x5ad6b4[_0x55bc29+0x3],_0x3ff10a=_0x5b5c12-_0x36da02,_0x41c390=_0x5b5c12+_0x36da02;if(_0x3ff10a<_0x170f47)_0x170f47=_0x3ff10a;if(_0x41c390>_0x5d9658)_0x5d9658=_0x41c390;if(_0x35ffde&&_0x5b5c12<_0x588e53)_0x588e53=_0x5b5c12;if(_0x35ffde&&_0x5b5c12>_0x2b1505)_0x2b1505=_0x5b5c12;const _0x33ae22=_0x5ad6b4[_0x55bc29+0x4],_0x5abe5d=_0x5ad6b4[_0x55bc29+0x5],_0x27d0a7=_0x33ae22-_0x5abe5d,_0x39ef13=_0x33ae22+_0x5abe5d;if(_0x27d0a7<_0x5aea19)_0x5aea19=_0x27d0a7;if(_0x39ef13>_0x4b73ec)_0x4b73ec=_0x39ef13;if(_0x35ffde&&_0x33ae22<_0x4516a3)_0x4516a3=_0x33ae22;if(_0x35ffde&&_0x33ae22>_0x300b72)_0x300b72=_0x33ae22;}_0x659f66[0x0]=_0x4d9e6c,_0x659f66[0x1]=_0x170f47,_0x659f66[0x2]=_0x5aea19,_0x659f66[0x3]=_0x2ff5e8,_0x659f66[0x4]=_0x5d9658,_0x659f66[0x5]=_0x4b73ec,_0x35ffde&&(_0x8c58e3[0x0]=_0x310f10,_0x8c58e3[0x1]=_0x588e53,_0x8c58e3[0x2]=_0x4516a3,_0x8c58e3[0x3]=_0x3ecc24,_0x8c58e3[0x4]=_0x2b1505,_0x8c58e3[0x5]=_0x300b72);}function getCentroidBounds(_0x505f83,_0x418825,_0xa92a48,_0x33fdea){let _0x10b317=Infinity,_0x2e8033=Infinity,_0x1a4762=Infinity,_0x5aed2d=-Infinity,_0x4d10d6=-Infinity,_0x1292a3=-Infinity;for(let _0xbd6b63=_0x418825*0x6,_0x1be81d=(_0x418825+_0xa92a48)*0x6;_0xbd6b63<_0x1be81d;_0xbd6b63+=0x6){const _0x208c65=_0x505f83[_0xbd6b63+0x0];if(_0x208c65<_0x10b317)_0x10b317=_0x208c65;if(_0x208c65>_0x5aed2d)_0x5aed2d=_0x208c65;const _0x461f42=_0x505f83[_0xbd6b63+0x2];if(_0x461f42<_0x2e8033)_0x2e8033=_0x461f42;if(_0x461f42>_0x4d10d6)_0x4d10d6=_0x461f42;const _0x40b15e=_0x505f83[_0xbd6b63+0x4];if(_0x40b15e<_0x1a4762)_0x1a4762=_0x40b15e;if(_0x40b15e>_0x1292a3)_0x1292a3=_0x40b15e;}_0x33fdea[0x0]=_0x10b317,_0x33fdea[0x1]=_0x2e8033,_0x33fdea[0x2]=_0x1a4762,_0x33fdea[0x3]=_0x5aed2d,_0x33fdea[0x4]=_0x4d10d6,_0x33fdea[0x5]=_0x1292a3;}function partition(_0x1fbf9c,_0x15e33c,_0x34fc04,_0x3d7c4c,_0xaa2172){const _0x5d9ecd=_0x4c4a;let _0x398c9c=_0x34fc04,_0x2b80bd=_0x34fc04+_0x3d7c4c-0x1;const _0x2f57a8=_0xaa2172[_0x5d9ecd(0xc2)],_0xf43839=_0xaa2172[_0x5d9ecd(0xb8)]*0x2;while(!![]){while(_0x398c9c<=_0x2b80bd&&_0x15e33c[_0x398c9c*0x6+_0xf43839]<_0x2f57a8){_0x398c9c++;}while(_0x398c9c<=_0x2b80bd&&_0x15e33c[_0x2b80bd*0x6+_0xf43839]>=_0x2f57a8){_0x2b80bd--;}if(_0x398c9c<_0x2b80bd){for(let _0x175014=0x0;_0x175014<0x3;_0x175014++){let _0x231395=_0x1fbf9c[_0x398c9c*0x3+_0x175014];_0x1fbf9c[_0x398c9c*0x3+_0x175014]=_0x1fbf9c[_0x2b80bd*0x3+_0x175014],_0x1fbf9c[_0x2b80bd*0x3+_0x175014]=_0x231395;let _0x1b0406=_0x15e33c[_0x398c9c*0x6+_0x175014*0x2+0x0];_0x15e33c[_0x398c9c*0x6+_0x175014*0x2+0x0]=_0x15e33c[_0x2b80bd*0x6+_0x175014*0x2+0x0],_0x15e33c[_0x2b80bd*0x6+_0x175014*0x2+0x0]=_0x1b0406;let _0x4a95c7=_0x15e33c[_0x398c9c*0x6+_0x175014*0x2+0x1];_0x15e33c[_0x398c9c*0x6+_0x175014*0x2+0x1]=_0x15e33c[_0x2b80bd*0x6+_0x175014*0x2+0x1],_0x15e33c[_0x2b80bd*0x6+_0x175014*0x2+0x1]=_0x4a95c7;}_0x398c9c++,_0x2b80bd--;}else return _0x398c9c;}}const BIN_COUNT=0x20,binsSort=(_0x3b8779,_0x2301a0)=>_0x3b8779[_0xe4d40(0xa0)]-_0x2301a0[_0xe4d40(0xa0)],sahBins=new Array(BIN_COUNT)[_0xe4d40(0xa6)]()[_0xe4d40(0xc8)](()=>{return{'count':0x0,'bounds':new Float32Array(0x6),'rightCacheBounds':new Float32Array(0x6),'leftCacheBounds':new Float32Array(0x6),'candidate':0x0};}),leftBounds=new Float32Array(0x6);function getOptimalSplit(_0x5c7977,_0x53c96f,_0x5ef41b,_0x1c6fba,_0x507571,_0xe62388){const _0x1ae9af=_0xe4d40;let _0x1a6d64=-0x1,_0xf722ed=0x0;if(_0xe62388===CENTER)_0x1a6d64=getLongestEdgeIndex(_0x53c96f),_0x1a6d64!==-0x1&&(_0xf722ed=(_0x53c96f[_0x1a6d64]+_0x53c96f[_0x1a6d64+0x3])/0x2);else{if(_0xe62388===AVERAGE)_0x1a6d64=getLongestEdgeIndex(_0x5c7977),_0x1a6d64!==-0x1&&(_0xf722ed=getAverage(_0x5ef41b,_0x1c6fba,_0x507571,_0x1a6d64));else{if(_0xe62388===SAH){const _0x5c2ecd=computeSurfaceArea(_0x5c7977);let _0xf1d0d0=TRIANGLE_INTERSECT_COST*_0x507571;const _0x26af6e=_0x1c6fba*0x6,_0x46b45e=(_0x1c6fba+_0x507571)*0x6;for(let _0x2beff5=0x0;_0x2beff5<0x3;_0x2beff5++){const _0x2539a5=_0x53c96f[_0x2beff5],_0x152f8d=_0x53c96f[_0x2beff5+0x3],_0x25c3cf=_0x152f8d-_0x2539a5,_0x3b2b00=_0x25c3cf/BIN_COUNT;if(_0x507571<BIN_COUNT/0x4){const _0x29d9ed=[...sahBins];_0x29d9ed[_0x1ae9af(0xb5)]=_0x507571;let _0x1bfb7d=0x0;for(let _0x27ac2e=_0x26af6e;_0x27ac2e<_0x46b45e;_0x27ac2e+=0x6,_0x1bfb7d++){const _0x295558=_0x29d9ed[_0x1bfb7d];_0x295558[_0x1ae9af(0xa0)]=_0x5ef41b[_0x27ac2e+0x2*_0x2beff5],_0x295558['count']=0x0;const {bounds:_0x39c2e0,leftCacheBounds:_0x5c14bc,rightCacheBounds:_0x4ada4b}=_0x295558;for(let _0x2cb4d7=0x0;_0x2cb4d7<0x3;_0x2cb4d7++){_0x4ada4b[_0x2cb4d7]=Infinity,_0x4ada4b[_0x2cb4d7+0x3]=-Infinity,_0x5c14bc[_0x2cb4d7]=Infinity,_0x5c14bc[_0x2cb4d7+0x3]=-Infinity,_0x39c2e0[_0x2cb4d7]=Infinity,_0x39c2e0[_0x2cb4d7+0x3]=-Infinity;}expandByTriangleBounds(_0x27ac2e,_0x5ef41b,_0x39c2e0);}_0x29d9ed['sort'](binsSort);let _0x5b3cb1=_0x507571;for(let _0x1cec80=0x0;_0x1cec80<_0x5b3cb1;_0x1cec80++){const _0x517b24=_0x29d9ed[_0x1cec80];while(_0x1cec80+0x1<_0x5b3cb1&&_0x29d9ed[_0x1cec80+0x1][_0x1ae9af(0xa0)]===_0x517b24[_0x1ae9af(0xa0)]){_0x29d9ed['splice'](_0x1cec80+0x1,0x1),_0x5b3cb1--;}}for(let _0x3894b4=_0x26af6e;_0x3894b4<_0x46b45e;_0x3894b4+=0x6){const _0x1c3591=_0x5ef41b[_0x3894b4+0x2*_0x2beff5];for(let _0x3983a7=0x0;_0x3983a7<_0x5b3cb1;_0x3983a7++){const _0x320c26=_0x29d9ed[_0x3983a7];_0x1c3591>=_0x320c26[_0x1ae9af(0xa0)]?expandByTriangleBounds(_0x3894b4,_0x5ef41b,_0x320c26[_0x1ae9af(0xcf)]):(expandByTriangleBounds(_0x3894b4,_0x5ef41b,_0x320c26[_0x1ae9af(0xc0)]),_0x320c26[_0x1ae9af(0xbf)]++);}}for(let _0x47d0d3=0x0;_0x47d0d3<_0x5b3cb1;_0x47d0d3++){const _0x5f5296=_0x29d9ed[_0x47d0d3],_0x9db8a=_0x5f5296[_0x1ae9af(0xbf)],_0x6d4a8f=_0x507571-_0x5f5296[_0x1ae9af(0xbf)],_0x42b953=_0x5f5296['leftCacheBounds'],_0x3c0b20=_0x5f5296[_0x1ae9af(0xcf)];let _0x5cb197=0x0;_0x9db8a!==0x0&&(_0x5cb197=computeSurfaceArea(_0x42b953)/_0x5c2ecd);let _0x56f38d=0x0;_0x6d4a8f!==0x0&&(_0x56f38d=computeSurfaceArea(_0x3c0b20)/_0x5c2ecd);const _0x220cf8=TRAVERSAL_COST+TRIANGLE_INTERSECT_COST*(_0x5cb197*_0x9db8a+_0x56f38d*_0x6d4a8f);_0x220cf8<_0xf1d0d0&&(_0x1a6d64=_0x2beff5,_0xf1d0d0=_0x220cf8,_0xf722ed=_0x5f5296[_0x1ae9af(0xa0)]);}}else{for(let _0x3c20d5=0x0;_0x3c20d5<BIN_COUNT;_0x3c20d5++){const _0x57e517=sahBins[_0x3c20d5];_0x57e517[_0x1ae9af(0xbf)]=0x0,_0x57e517[_0x1ae9af(0xa0)]=_0x2539a5+_0x3b2b00+_0x3c20d5*_0x3b2b00;const _0x42a26f=_0x57e517[_0x1ae9af(0xc1)];for(let _0x3bf666=0x0;_0x3bf666<0x3;_0x3bf666++){_0x42a26f[_0x3bf666]=Infinity,_0x42a26f[_0x3bf666+0x3]=-Infinity;}}for(let _0x43d37d=_0x26af6e;_0x43d37d<_0x46b45e;_0x43d37d+=0x6){const _0x3580f7=_0x5ef41b[_0x43d37d+0x2*_0x2beff5],_0x36e9db=_0x3580f7-_0x2539a5;let _0x4910ab=~~(_0x36e9db/_0x3b2b00);if(_0x4910ab>=BIN_COUNT)_0x4910ab=BIN_COUNT-0x1;const _0x31d3a0=sahBins[_0x4910ab];_0x31d3a0[_0x1ae9af(0xbf)]++,expandByTriangleBounds(_0x43d37d,_0x5ef41b,_0x31d3a0[_0x1ae9af(0xc1)]);}const _0x26f1a2=sahBins[BIN_COUNT-0x1];copyBounds(_0x26f1a2[_0x1ae9af(0xc1)],_0x26f1a2[_0x1ae9af(0xcf)]);for(let _0x14e72d=BIN_COUNT-0x2;_0x14e72d>=0x0;_0x14e72d--){const _0x2d0d37=sahBins[_0x14e72d],_0x2b8a2c=sahBins[_0x14e72d+0x1];unionBounds(_0x2d0d37[_0x1ae9af(0xc1)],_0x2b8a2c[_0x1ae9af(0xcf)],_0x2d0d37[_0x1ae9af(0xcf)]);}let _0x1caf0f=0x0;for(let _0x147456=0x0;_0x147456<BIN_COUNT-0x1;_0x147456++){const _0x12b40e=sahBins[_0x147456],_0xc4dc21=_0x12b40e[_0x1ae9af(0xbf)],_0x572db6=_0x12b40e[_0x1ae9af(0xc1)],_0x4c6e1a=sahBins[_0x147456+0x1],_0x1ccf0e=_0x4c6e1a['rightCacheBounds'];_0xc4dc21!==0x0&&(_0x1caf0f===0x0?copyBounds(_0x572db6,leftBounds):unionBounds(_0x572db6,leftBounds,leftBounds));_0x1caf0f+=_0xc4dc21;let _0x5ad564=0x0,_0xda9ebd=0x0;_0x1caf0f!==0x0&&(_0x5ad564=computeSurfaceArea(leftBounds)/_0x5c2ecd);const _0x1c3078=_0x507571-_0x1caf0f;_0x1c3078!==0x0&&(_0xda9ebd=computeSurfaceArea(_0x1ccf0e)/_0x5c2ecd);const _0x3a5ab3=TRAVERSAL_COST+TRIANGLE_INTERSECT_COST*(_0x5ad564*_0x1caf0f+_0xda9ebd*_0x1c3078);_0x3a5ab3<_0xf1d0d0&&(_0x1a6d64=_0x2beff5,_0xf1d0d0=_0x3a5ab3,_0xf722ed=_0x12b40e['candidate']);}}}}else console[_0x1ae9af(0xca)](_0x1ae9af(0xa1)+_0xe62388+_0x1ae9af(0xb2));}}return{'axis':_0x1a6d64,'pos':_0xf722ed};}function getAverage(_0x4406e1,_0x22782f,_0x4c9a1f,_0x582371){let _0x339e89=0x0;for(let _0x204987=_0x22782f,_0x465003=_0x22782f+_0x4c9a1f;_0x204987<_0x465003;_0x204987++){_0x339e89+=_0x4406e1[_0x204987*0x6+_0x582371*0x2];}return _0x339e89/_0x4c9a1f;}function computeTriangleBounds(_0x27b536,_0x137b7e){const _0x28cbd7=_0xe4d40,_0x1150d4=_0x27b536[_0x28cbd7(0xc9)][_0x28cbd7(0xa3)],_0x2e04b1=_0x1150d4['array'],_0x5654af=_0x27b536[_0x28cbd7(0xa7)][_0x28cbd7(0xae)],_0x4fc7b=_0x5654af[_0x28cbd7(0xb5)]/0x3,_0x17ea64=new Float32Array(_0x4fc7b*0x6),_0x5b9f5e=_0x1150d4[_0x28cbd7(0xc5)]||0x0;let _0x5c1776=0x3;_0x1150d4[_0x28cbd7(0xaa)]&&(_0x5c1776=_0x1150d4['data'][_0x28cbd7(0xc3)]);for(let _0x2fb530=0x0;_0x2fb530<_0x4fc7b;_0x2fb530++){const _0x1f3cc8=_0x2fb530*0x3,_0x134a49=_0x2fb530*0x6,_0x35ebee=_0x5654af[_0x1f3cc8+0x0]*_0x5c1776+_0x5b9f5e,_0x571f17=_0x5654af[_0x1f3cc8+0x1]*_0x5c1776+_0x5b9f5e,_0x11e2c8=_0x5654af[_0x1f3cc8+0x2]*_0x5c1776+_0x5b9f5e;for(let _0x3b90e4=0x0;_0x3b90e4<0x3;_0x3b90e4++){const _0x2d1fd1=_0x2e04b1[_0x35ebee+_0x3b90e4],_0x386ee7=_0x2e04b1[_0x571f17+_0x3b90e4],_0x1d1e2c=_0x2e04b1[_0x11e2c8+_0x3b90e4];let _0x3843e9=_0x2d1fd1;if(_0x386ee7<_0x3843e9)_0x3843e9=_0x386ee7;if(_0x1d1e2c<_0x3843e9)_0x3843e9=_0x1d1e2c;let _0x229f05=_0x2d1fd1;if(_0x386ee7>_0x229f05)_0x229f05=_0x386ee7;if(_0x1d1e2c>_0x229f05)_0x229f05=_0x1d1e2c;const _0xabfbf3=(_0x229f05-_0x3843e9)/0x2,_0x1813bf=_0x3b90e4*0x2;_0x17ea64[_0x134a49+_0x1813bf+0x0]=_0x3843e9+_0xabfbf3,_0x17ea64[_0x134a49+_0x1813bf+0x1]=_0xabfbf3+(Math[_0x28cbd7(0xb3)](_0x3843e9)+_0xabfbf3)*FLOAT32_EPSILON;if(_0x3843e9<_0x137b7e[_0x3b90e4])_0x137b7e[_0x3b90e4]=_0x3843e9;if(_0x229f05>_0x137b7e[_0x3b90e4+0x3])_0x137b7e[_0x3b90e4+0x3]=_0x229f05;}}return _0x17ea64;}export function buildTree(_0xdc6995,_0x2c7653){const _0x39b1f9=_0xe4d40;function _0x38e1b6(_0x4745cf){_0x4fce72&&_0x4fce72(_0x4745cf/_0x2b2e6d);}function _0x1b0dc7(_0x3a9318,_0x2014b1,_0x2982b6,_0xbda22f=null,_0x30c998=0x0){const _0xf7fe=_0x4c4a;!_0x1e6337&&_0x30c998>=_0x51876b&&(_0x1e6337=!![],_0x144874&&(console[_0xf7fe(0xca)](_0xf7fe(0xb7)+_0x51876b+'\x20reached\x20when\x20generating\x20BVH.\x20Consider\x20increasing\x20maxDepth.'),console[_0xf7fe(0xca)](_0xdc6995)));if(_0x2982b6<=_0x21236b||_0x30c998>=_0x51876b)return _0x38e1b6(_0x2014b1+_0x2982b6),_0x3a9318[_0xf7fe(0xc5)]=_0x2014b1,_0x3a9318['count']=_0x2982b6,_0x3a9318;const _0x46f5e9=getOptimalSplit(_0x3a9318[_0xf7fe(0xcc)],_0xbda22f,_0x3755ac,_0x2014b1,_0x2982b6,_0x1ad4e4);if(_0x46f5e9[_0xf7fe(0xb8)]===-0x1)return _0x38e1b6(_0x2014b1+_0x2982b6),_0x3a9318[_0xf7fe(0xc5)]=_0x2014b1,_0x3a9318[_0xf7fe(0xbf)]=_0x2982b6,_0x3a9318;const _0x5e8cb2=partition(_0x158ca1,_0x3755ac,_0x2014b1,_0x2982b6,_0x46f5e9);if(_0x5e8cb2===_0x2014b1||_0x5e8cb2===_0x2014b1+_0x2982b6)_0x38e1b6(_0x2014b1+_0x2982b6),_0x3a9318[_0xf7fe(0xc5)]=_0x2014b1,_0x3a9318['count']=_0x2982b6;else{_0x3a9318[_0xf7fe(0xcd)]=_0x46f5e9[_0xf7fe(0xb8)];const _0x5034ff=new MeshBVHNode(),_0x4f99ca=_0x2014b1,_0x4e78a7=_0x5e8cb2-_0x2014b1;_0x3a9318[_0xf7fe(0xb6)]=_0x5034ff,_0x5034ff[_0xf7fe(0xcc)]=new Float32Array(0x6),getBounds(_0x3755ac,_0x4f99ca,_0x4e78a7,_0x5034ff[_0xf7fe(0xcc)],_0x53c868),_0x1b0dc7(_0x5034ff,_0x4f99ca,_0x4e78a7,_0x53c868,_0x30c998+0x1);const _0x36f21=new MeshBVHNode(),_0xc2e8dd=_0x5e8cb2,_0x431fbb=_0x2982b6-_0x4e78a7;_0x3a9318[_0xf7fe(0xbb)]=_0x36f21,_0x36f21[_0xf7fe(0xcc)]=new Float32Array(0x6),getBounds(_0x3755ac,_0xc2e8dd,_0x431fbb,_0x36f21[_0xf7fe(0xcc)],_0x53c868),_0x1b0dc7(_0x36f21,_0xc2e8dd,_0x431fbb,_0x53c868,_0x30c998+0x1);}return _0x3a9318;}ensureIndex(_0xdc6995,_0x2c7653);const _0x259508=new Float32Array(0x6),_0x53c868=new Float32Array(0x6),_0x3755ac=computeTriangleBounds(_0xdc6995,_0x259508),_0x158ca1=_0xdc6995[_0x39b1f9(0xa7)][_0x39b1f9(0xae)],_0x51876b=_0x2c7653[_0x39b1f9(0xcb)],_0x144874=_0x2c7653[_0x39b1f9(0xba)],_0x21236b=_0x2c7653[_0x39b1f9(0xb9)],_0x1ad4e4=_0x2c7653[_0x39b1f9(0xb0)],_0x4fce72=_0x2c7653[_0x39b1f9(0x9d)],_0x2b2e6d=_0xdc6995[_0x39b1f9(0xa7)][_0x39b1f9(0xbf)]/0x3;let _0x1e6337=![];const _0x24fb1d=[],_0x267e4c=getRootIndexRanges(_0xdc6995);if(_0x267e4c[_0x39b1f9(0xb5)]===0x1){const _0x26588f=_0x267e4c[0x0],_0x408c4f=new MeshBVHNode();_0x408c4f['boundingData']=_0x259508,getCentroidBounds(_0x3755ac,_0x26588f[_0x39b1f9(0xc5)],_0x26588f[_0x39b1f9(0xbf)],_0x53c868),_0x1b0dc7(_0x408c4f,_0x26588f['offset'],_0x26588f['count'],_0x53c868),_0x24fb1d['push'](_0x408c4f);}else for(let _0x30c008 of _0x267e4c){const _0x479e16=new MeshBVHNode();_0x479e16[_0x39b1f9(0xcc)]=new Float32Array(0x6),getBounds(_0x3755ac,_0x30c008['offset'],_0x30c008[_0x39b1f9(0xbf)],_0x479e16[_0x39b1f9(0xcc)],_0x53c868),_0x1b0dc7(_0x479e16,_0x30c008['offset'],_0x30c008[_0x39b1f9(0xbf)],_0x53c868),_0x24fb1d[_0x39b1f9(0xb1)](_0x479e16);}return _0x24fb1d;}function _0x4c4a(_0x21b37d,_0x4428fc){const _0x4e803e=_0x4e80();return _0x4c4a=function(_0x4c4ac6,_0x244718){_0x4c4ac6=_0x4c4ac6-0x9c;let _0x1890bf=_0x4e803e[_0x4c4ac6];return _0x1890bf;},_0x4c4a(_0x21b37d,_0x4428fc);}export function buildPackedTree(_0x56640c,_0x3ce4a8){const _0x41a8ae=_0xe4d40,_0x331ad8=buildTree(_0x56640c,_0x3ce4a8);let _0x1af019,_0x555164,_0x26992e;const _0x1a7625=[],_0x1c1910=_0x3ce4a8[_0x41a8ae(0xbd)]?SharedArrayBuffer:ArrayBuffer;for(let _0x335637=0x0;_0x335637<_0x331ad8['length'];_0x335637++){const _0x582c7a=_0x331ad8[_0x335637];let _0x24721e=_0x17819f(_0x582c7a);const _0x431949=new _0x1c1910(BYTES_PER_NODE*_0x24721e);_0x1af019=new Float32Array(_0x431949),_0x555164=new Uint32Array(_0x431949),_0x26992e=new Uint16Array(_0x431949),_0x4b98f7(0x0,_0x582c7a),_0x1a7625['push'](_0x431949);}return _0x1a7625;function _0x17819f(_0x2064dc){const _0xa8cf99=_0x41a8ae;return _0x2064dc['count']?0x1:0x1+_0x17819f(_0x2064dc['left'])+_0x17819f(_0x2064dc[_0xa8cf99(0xbb)]);}function _0x4b98f7(_0x1969c5,_0x109478){const _0x5b0fd3=_0x41a8ae,_0x15433a=_0x1969c5/0x4,_0x4ea6e3=_0x1969c5/0x2,_0x4b004d=!!_0x109478[_0x5b0fd3(0xbf)],_0x5ef171=_0x109478['boundingData'];for(let _0x247256=0x0;_0x247256<0x6;_0x247256++){_0x1af019[_0x15433a+_0x247256]=_0x5ef171[_0x247256];}if(_0x4b004d){const _0x381d20=_0x109478[_0x5b0fd3(0xc5)],_0x379f5f=_0x109478['count'];return _0x555164[_0x15433a+0x6]=_0x381d20,_0x26992e[_0x4ea6e3+0xe]=_0x379f5f,_0x26992e[_0x4ea6e3+0xf]=IS_LEAFNODE_FLAG,_0x1969c5+BYTES_PER_NODE;}else{const _0x139ffe=_0x109478['left'],_0x3759aa=_0x109478['right'],_0xddb96f=_0x109478['splitAxis'];let _0x12bb0e;_0x12bb0e=_0x4b98f7(_0x1969c5+BYTES_PER_NODE,_0x139ffe);if(_0x12bb0e/0x4>Math['pow'](0x2,0x20))throw new Error(_0x5b0fd3(0xa4));return _0x555164[_0x15433a+0x6]=_0x12bb0e/0x4,_0x12bb0e=_0x4b98f7(_0x12bb0e,_0x3759aa),_0x555164[_0x15433a+0x7]=_0xddb96f,_0x12bb0e;}}}